{
  "indexed_at": "2025-09-01T18:16:18.925814",
  "root": ".",
  "project_structure": {
    "type": "tree",
    "root": ".",
    "tree": [
      ".",
      "\u251c\u2500\u2500 api/ (5 files)",
      "\u2502   \u2514\u2500\u2500 auth/ (3 files)",
      "\u251c\u2500\u2500 flashcards/ (2 files)",
      "\u251c\u2500\u2500 lib/ (2 files)",
      "\u251c\u2500\u2500 scripts/ (1 files)",
      "\u251c\u2500\u2500 supabase/ (6 files)",
      "\u2502   \u251c\u2500\u2500 functions/ (4 files)",
      "\u2502   \u2502   \u251c\u2500\u2500 _shared/ (1 files)",
      "\u2502   \u2502   \u251c\u2500\u2500 auth/ (1 files)",
      "\u2502   \u2502   \u251c\u2500\u2500 check-answer/ (1 files)",
      "\u2502   \u2502   \u2514\u2500\u2500 flashcards/ (1 files)",
      "\u2502   \u2514\u2500\u2500 migrations/ (2 files)",
      "\u251c\u2500\u2500 package.json",
      "\u2514\u2500\u2500 README.md"
    ]
  },
  "documentation_map": {
    "README.md": {
      "sections": [
        "Brothers Karamazov Flashcard Study App",
        "Features",
        "Setup Instructions",
        "1. Supabase Setup",
        "2. Edge Function Setup",
        "3. Configure the App",
        "4. Get Anthropic API Key",
        "Deployment Options",
        "Option 1: Vercel (Recommended)",
        "Option 2: Netlify"
      ],
      "architecture_hints": []
    },
    "arch.md": {
      "sections": [
        "Brothers Karamazov Flashcard App - Architecture",
        "High-Level Architecture Flow",
        "Detailed Component Architecture",
        "1. Authentication System",
        "2. Database Abstraction Layer",
        "3. Flashcard Data Management",
        "4. Study Session Management",
        "5. Answer Assessment System",
        "6. Progress Persistence",
        "7. UI State Management"
      ],
      "architecture_hints": []
    }
  },
  "directory_purposes": {
    "scripts": "Build and utility scripts",
    "lib": "Library code and shared modules",
    "api": "API endpoints and route handlers",
    "supabase/migrations": "Database migration files",
    "api/auth": "Authentication and authorization logic",
    "supabase/functions/auth": "Authentication and authorization logic"
  },
  "stats": {
    "total_files": 23,
    "total_directories": 13,
    "fully_parsed": {
      "javascript": 10,
      "typescript": 4
    },
    "listed_only": {
      "html": 1,
      "json": 6,
      "sql": 2
    },
    "markdown_files": 2
  },
  "files": {
    "index.html": {
      "language": "html",
      "parsed": false,
      "purpose": "Application entry point"
    },
    "vercel.json": {
      "language": "json",
      "parsed": false
    },
    "server.js": {
      "language": "javascript",
      "parsed": true,
      "imports": [
        "express",
        "cors",
        "bcryptjs",
        "@supabase/supabase-js"
      ],
      "functions": {
        "generateSessionToken": "()",
        "hashPassword": "async (password)",
        "verifyPassword": "async (password, hash)",
        "requireAuth": "(req, res, next)"
      },
      "classes": {},
      "constants": {
        "PORT": "value"
      },
      "variables": [
        "express",
        "cors",
        "bcrypt",
        "app",
        "supabase",
        "sessions",
        "email",
        "passwordHash",
        "sessionToken",
        "isValid",
        "token",
        "session",
        "flashcardData",
        "setId",
        "formattedProgress",
        "cardIndex",
        "isCorrect",
        "wasSeen",
        "prevTimesSeen",
        "prevTimesCorrect",
        "now"
      ],
      "call_graph": {}
    },
    "dev-server.js": {
      "language": "javascript",
      "parsed": false
    },
    "package-lock.json": {
      "language": "json",
      "parsed": false
    },
    "package.json": {
      "language": "json",
      "parsed": false
    },
    "PROJECT_INDEX.json": {
      "language": "json",
      "parsed": false
    },
    "flashcards/karamazov_chapters.json": {
      "language": "json",
      "parsed": false
    },
    "flashcards/karamazov_chain.json": {
      "language": "json",
      "parsed": false
    },
    "scripts/generate_flashcard_migration.js": {
      "language": "javascript",
      "parsed": true,
      "imports": [
        "fs",
        "path"
      ],
      "functions": {
        "escapeSql": "(str)"
      },
      "classes": {},
      "variables": [
        "fs",
        "path",
        "chainData",
        "chaptersData",
        "sql",
        "migrationPath"
      ],
      "call_graph": {}
    },
    "lib/auth.js": {
      "language": "javascript",
      "parsed": true,
      "imports": [
        "jsonwebtoken"
      ],
      "functions": {
        "generateToken": "(payload)",
        "verifyToken": {
          "signature": "(token)",
          "called_by": [
            "requireAuth"
          ]
        },
        "requireAuth": {
          "calls": [
            "verifyToken"
          ],
          "signature": "(req)"
        }
      },
      "classes": {},
      "constants": {
        "JWT_SECRET": "value"
      },
      "variables": [
        "jwt",
        "authHeader",
        "token"
      ],
      "call_graph": {}
    },
    "lib/supabase.js": {
      "language": "javascript",
      "parsed": false
    },
    "api/flashcards.js": {
      "language": "javascript",
      "parsed": false
    },
    "api/progress.js": {
      "language": "javascript",
      "parsed": false
    },
    "api/auth/signin.js": {
      "language": "javascript",
      "parsed": false
    },
    "api/auth/signup.js": {
      "language": "javascript",
      "parsed": false
    },
    "api/auth/signout.js": {
      "language": "javascript",
      "parsed": false
    },
    "supabase/migrations/001_initial_schema.sql": {
      "language": "sql",
      "parsed": false
    },
    "supabase/migrations/002_populate_flashcards.sql": {
      "language": "sql",
      "parsed": false
    },
    "supabase/functions/flashcards/index.ts": {
      "language": "typescript",
      "parsed": false,
      "purpose": "Application entry point"
    },
    "supabase/functions/auth/index.ts": {
      "language": "typescript",
      "parsed": true,
      "purpose": "Application entry point",
      "imports": [
        "https://deno.land/std@0.168.0/http/server.ts",
        "https://esm.sh/@supabase/supabase-js@2",
        "../_shared/cors.ts"
      ],
      "functions": {
        "hashPassword": "async (password: string): Promise<string>"
      },
      "classes": {},
      "variables": [
        "supabaseUrl",
        "supabaseServiceKey",
        "supabase",
        "email",
        "encoder",
        "data",
        "hashBuffer",
        "hashArray"
      ],
      "call_graph": {}
    },
    "supabase/functions/check-answer/index.ts": {
      "language": "typescript",
      "parsed": true,
      "purpose": "Application entry point",
      "imports": [
        "https://deno.land/std@0.168.0/http/server.ts"
      ],
      "functions": {
        "simpleAssessment": "(userAnswer: string, correctAnswer: string)"
      },
      "classes": {},
      "variables": [
        "corsHeaders",
        "anthropicApiKey",
        "response",
        "data",
        "responseText",
        "cleanedResponse",
        "fallbackAssessment",
        "userLower",
        "correctLower"
      ],
      "call_graph": {}
    },
    "supabase/functions/_shared/cors.ts": {
      "language": "typescript",
      "parsed": false
    }
  },
  "dependency_graph": {
    "server.js": [
      "express",
      "cors",
      "bcryptjs",
      "@supabase/supabase-js"
    ],
    "scripts/generate_flashcard_migration.js": [
      "fs",
      "path"
    ],
    "lib/auth.js": [
      "jsonwebtoken"
    ],
    "supabase/functions/auth/index.ts": [
      "https://deno.land/std@0.168.0/http/server.ts",
      "https://esm.sh/@supabase/supabase-js@2",
      "supabase/functions/_shared/cors.ts"
    ],
    "supabase/functions/check-answer/index.ts": [
      "https://deno.land/std@0.168.0/http/server.ts"
    ]
  },
  "staleness_check": 1756160178.971329
}